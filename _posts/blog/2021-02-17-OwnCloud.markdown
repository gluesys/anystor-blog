---
layout:     post
title:      "OwnCloud 란 무엇인가?"
date:       2021-02-17
author:     고 경훈 (khko@gluesys.com)
categories: blog
tags:       Cloud-오픈소스-클라우드-기능리뷰-스토리지-파일스토리지
cover:      "/assets/owncloud_photo/Cloud-Main-Page.jpg"
main:       "/assets/owncloud_photo/Cloud-Main-Page.jpg"
---

&nbsp;

### Cloud란 무엇인가?

![Cloudimg](/assets/owncloud_photo/Cloud.png)

[그림 출처](https://velog.io/@minidoo/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9CCloud%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C)

**Cloud**는 대부분의 사람이 누구나 써봤을 **인터넷** 을 뜻합니다. 이러한 **Cloud**를 통해 받는 서비스를 **Cloud 서비스**라고 합니다. **Cloud 서비스**는 흔히 다른 장소에 있는 물리적, 소프트웨어적 자원을 이용하여 서비스를 받습니다.

&nbsp;

### 1. OwnCloud란 무엇인가?

![OwnCloudimg](/assets/owncloud_photo/ownCloud-logo.png)

**OwnCloud**란 인터넷을 통한 NAS 형태의 오픈소스 파일 호스팅 서비스를 만들고 사용하기 위한 클라이언트-서버 소프트웨어입니다. 데이터를 저장할 때는 **파일 스토리지** 형식을 사용하며, **Own Cloud**의 사용자에게 권한에 따라 장치에서의 모든 파일 `액세스`, `보안`, `제어`, `통합`을 제공합니다.

&nbsp;


### 2. OwnCloud의 설치 과정

* 설치 환경: CentOS 7

1. DB, http 패키지 설치  
 `yum -y install mysql-community-server wget mariadb-server mariadb httpd`
2. 필요한 php 패키지 설치  
 `yum -y install php56w php56w-opcache php56w-mysql php56w-gd php56w-mbstring php56w-xml php56w-intl`
3. 방화벽 데몬 disable 및 영구 disable 설정  
 `systemctl disable --now firewalld`
4. 압축 파일 다운로드  
 `wget https://download.owncloud.org/community/owncloud-complete-20201216.zip`
5. 서비스할 서버에서 압축파일 해제  
 `unzip 20201216.zip`
6. MySQL config 추가, MySQL 기본 인코딩 UTF-8 설정  
 `vi /etc/my.cnf`

	```
	[client]
	default-character-set = utf8

	[mysqld]
	init_connect="SET NAMES utf8"
	character-set-server = utf8
	collation-server = utf8_general_ci
	character-set-client-handshake=FALSE
	init_connect="SET collation_connection = utf8_general_ci"

	[mysqldump]
	default-character-set = utf8

	[mysql]
	default-character-set = utf8
	```

7. MySQL 서비스 enable 설정  
 `systemctl enable --now mysqld`

8. MySQL 계정 및 권한, DATABASE 생성
	```
	mysql -u root 
	(MySQL 서비스 root 접속)

	mysql> update user set password=password('새비밀번호') WHERE user='root';
	(MySQL 서비스 root PW 설정) [option]

	mysql> create database <DB이름> default character set utf8;
	(owncloud에서 사용할 DB 생성)

	mysql> create user '<계정명>'@'%' identified by '<password>' 
	(외부접속 가능한 계정 생성)

	mysql> create user '<계정명>'@'localhost' identified by '<password>' 
	(로컬접속만 가능한 계정 생성) [option]

	mysql> grant all privileges on <DB이름>.* to '아이디'@'%'; 
	(owncloud DB에 새로 생성한 계정 권한 부여)

	mysql> grant all privileges on <DB이름>.* to '아이디'@'localhost'; 
	(owncloud DB에 새로 생성한 계정 권한 부여)

	mysql> flush privileges; 
	(MySQL 설정 저장)
	```

8. OwnCloud config 종속 옵션 및 설정  
 `vi /etc/httpd/conf.d/owncloud.conf`

	```
	Alias /owncloud "/var/www/html/owncloud/"

	<Directory "/var/www/html/owncloud">

	Options +FollowSymLinks
	AllowOverride All


	<IfModule mod_dav.c>

	Dav off

	</IfModule>


	SetEnv HOME /var/www/html/owncloud
	SetEnv HTTP_HOME /var/www/html/owncloud

	</Directory>


	<Directory "/var/www/html/owncloud/data/">

	# just in case if .htaccess gets disabled
	Require all denied

	</Directory>
	```
9. apache 계정 owncloud 디렉토리 소유권 설정  
 `chown -R apache.apache /root/owncloud`
10. apache 계정 owncloud 디렉토리 권한 설정  
 `chmod -R 770 /root/owncloud`
11. owncloud 폴더 옮기기  
 `cp -ar /root/owncloud /var/www/html/`
12. http 서비스 재시작  
 `systemctl restart httpd`

&nbsp;

### 3. OwnCloud의 공통기능

* 기능이 여러 가지 있기에 제일 많이 사용하는 기능들에 관해서만 소개하도록 하겠습니다.

---

![fileupload](/assets/owncloud_photo/fileupload.PNG)
<center>&#60;파일 업로드&#62;</center>

기본적인 NAS와 같은 형태로 Drag and Drop 또는 Upload 이용한 파일 업로드가 가능합니다.
네트워크 기반의 클라우드 저장소 기능 중 가장 기본적이고도 핵심 기술이라고 할 수 있겠는데요.
**OwnCloud**를 이용하는 사용자끼리 공유를 하거나 파일을 저장하기 위해 사용합니다.

---

&nbsp;

![Linkupload](/assets/owncloud_photo/Linkupload.PNG)
 <center>&#60;파일 공유&#62;</center>

업로드한 파일에 대해 **OwnCloud**를 사용하는 특정 User들에 파일을 공유하여 권한에 따라 다운로드 혹은 파일 삭제, 수정이 가능합니다.
또한 "공유 링크"라는 추가적인 기능을 통해서 URL을 만들어 공유하거나 암호를 설정하여 보안에 한층 더 할 수 있습니다.

---

&nbsp;

![activelog.PNG](/assets/owncloud_photo/activelog.PNG)
<center>&#60;활동 Log&#62;</center>

파일 업로드를 통해 파일을 올렸을 경우에 언제 올렸는지에 대한 히스토리도 확인하실 수 있습니다.  

---

&nbsp;

![Alt text](/assets/owncloud_photo/comment.PNG)
<center>&#60;파일 댓글&#62;</center>

업로드한 파일에 대해 댓글을 작성하고 간단한 내용들을 적어서 히스토리를 남길 수 있습니다.

---

&nbsp;

<img src="/assets/owncloud_photo/user.PNG" width="100%" height="100%" title="px(픽셀) 크기 설정" >

<center>&#60;사용자 관리&#62;</center>

권한 또는 보안에서 중요하다고 볼 수 있는 사용자를 관리하는 기능입니다. admin이라는 그룹에 속해있는 사용자는 **OwnCloud**에서 사용자들을 관리할 수 있는 SuperUser(root)가 됩니다. 일반그룹을 생성하여 여러 사용자들을 나누어 관리할 수 있습니다. 그리고 그 일반그룹에 대한 admin 권한을 부여하여 그룹에 대한 관리를 할 수 있도록 설정할 수 있습니다.  
